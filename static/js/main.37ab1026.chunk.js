(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,n){e.exports=n(27)},22:function(e,t,n){},23:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t);var s=n(0),o=n.n(s),i=n(13),a=n.n(i),r=(n(22),n(2)),c=n(3),u=n(5),l=n(4),h=n(6),f=(n(23),n(7)),v=n.n(f),d=n(14),p=n(9),b=n(1),m=n(15),g=n(8),w=n.n(g),y=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).isPainting=!1,n.userStrokeStyle="#EE92C2",n.guestStrokeStyle="#F0C987",n.line=[],n.userId=Object(m.v4)(),n.prevPos={offsetX:0,offsetY:0},n.onMouseDown=n.onMouseDown.bind(Object(b.a)(n)),n.onMouseMove=n.onMouseMove.bind(Object(b.a)(n)),n.endPaintEvent=n.endPaintEvent.bind(Object(b.a)(n)),w.a.logToConsole=!0,n.pusher=new w.a("8bfa62afc4715b6ebbf3",{cluster:"us3",forceTLS:!0}),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"onMouseDown",value:function(e){var t=e.nativeEvent,n=t.offsetX,s=t.offsetY;this.isPainting=!0,this.prevPos={offsetX:n,offsetY:s}}},{key:"onMouseMove",value:function(e){var t=e.nativeEvent;if(this.isPainting){var n={offsetX:t.offsetX,offsetY:t.offsetY},s={start:Object(p.a)({},this.prevPos),stop:Object(p.a)({},n)};this.line=this.line.concat(s),this.paint(this.prevPos,n,this.userStrokeStyle)}}},{key:"endPaintEvent",value:function(){this.isPainting&&(this.isPainting=!1,this.sendPaintData())}},{key:"paint",value:function(e,t,n){var s=t.offsetX,o=t.offsetY,i=e.offsetX,a=e.offsetY;this.ctx.beginPath(),this.ctx.strokeStyle=n,this.ctx.moveTo(i,a),this.ctx.lineTo(s,o),this.ctx.stroke(),this.prevPos={offsetX:s,offsetY:o}}},{key:"sendPaintData",value:function(){var e=Object(d.a)(v.a.mark(function e(){var t,n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={line:this.line,userId:this.userId},e.next=3,fetch("http://localhost:4000/paint",{method:"post",body:JSON.stringify(t),headers:{"content-type":"application/json"}});case 3:return n=e.sent,e.next=6,n.json();case 6:e.sent,this.line=[];case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this;this.canvas.width=1e3,this.canvas.height=800,this.ctx=this.canvas.getContext("2d"),this.ctx.lineJoin="round",this.ctx.lineCap="round",this.ctx.lineWidth=5,this.pusher.subscribe("painting").bind("draw",function(t){var n=t.userId,s=t.line;console.log("User "+n+" drew."),n!==e.userId&&s.forEach(function(t){e.paint(t.start,t.stop,e.guestStrokeStyle)})})}},{key:"render",value:function(){var e=this;return o.a.createElement("canvas",{ref:function(t){return e.canvas=t},style:{background:"black"},onMouseDown:this.onMouseDown,onMouseLeave:this.endPaintEvent,onMouseUp:this.endPaintEvent,onMouseMove:this.onMouseMove})}}]),t}(s.Component),k=function(e){function t(){return Object(r.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement(s.Fragment,null,o.a.createElement("h3",{style:{textAlign:"center"}},"Dos Paint"),o.a.createElement("div",{className:"main"},o.a.createElement("div",{className:"color-guide"},o.a.createElement("h5",null,"Color Guide"),o.a.createElement("div",{className:"user user"},"User"),o.a.createElement("div",{className:"user guest"},"Guest")),o.a.createElement(y,null)))}}]),t}(s.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(o.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[16,1,2]]]);
//# sourceMappingURL=main.37ab1026.chunk.js.map