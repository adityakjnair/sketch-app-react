(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(t,e,n){t.exports=n(27)},22:function(t,e,n){},23:function(t,e,n){},27:function(t,e,n){"use strict";n.r(e);var o=n(0),s=n.n(o),i=n(13),a=n.n(i),r=(n(22),n(2)),c=n(3),u=n(5),f=n(4),h=n(6),l=(n(23),n(7)),v=n.n(l),d=n(14),p=n(9),b=n(1),w=n(15),k=n(8),y=n.n(k),g=function(t){function e(t){var n;return Object(r.a)(this,e),(n=Object(u.a)(this,Object(f.a)(e).call(this,t))).isPainting=!1,n.userStrokeStyle="#EE92C2",n.guestStrokeStyle="#F0C987",n.line=[],n.userId=Object(w.v4)(),n.prevPos={offsetX:0,offsetY:0},n.onMouseDown=n.onMouseDown.bind(Object(b.a)(n)),n.onMouseMove=n.onMouseMove.bind(Object(b.a)(n)),n.endPaintEvent=n.endPaintEvent.bind(Object(b.a)(n)),y.a.logToConsole=!0,n.pusher=new y.a("8bfa62afc4715b6ebbf3",{cluster:"us3",forceTLS:!0}),n}return Object(h.a)(e,t),Object(c.a)(e,[{key:"onMouseDown",value:function(t){var e=t.nativeEvent,n=e.offsetX,o=e.offsetY;this.isPainting=!0,this.prevPos={offsetX:n,offsetY:o}}},{key:"onMouseMove",value:function(t){var e=t.nativeEvent;if(this.isPainting){var n={offsetX:e.offsetX,offsetY:e.offsetY},o={start:Object(p.a)({},this.prevPos),stop:Object(p.a)({},n)};this.line=this.line.concat(o),this.paint(this.prevPos,n,this.userStrokeStyle)}}},{key:"endPaintEvent",value:function(){this.isPainting&&(this.isPainting=!1,this.sendPaintData())}},{key:"paint",value:function(t,e,n){var o=e.offsetX,s=e.offsetY,i=t.offsetX,a=t.offsetY;this.ctx.beginPath(),this.ctx.strokeStyle=n,this.ctx.moveTo(i,a),this.ctx.lineTo(o,s),this.ctx.stroke(),this.prevPos={offsetX:o,offsetY:s}}},{key:"sendPaintData",value:function(){var t=Object(d.a)(v.a.mark(function t(){var e,n;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e={line:this.line,userId:this.userId},t.next=3,fetch("http://localhost:4000/paint",{method:"post",body:JSON.stringify(e),headers:{"content-type":"application/json"}});case 3:return n=t.sent,t.next=6,n.json();case 6:t.sent,this.line=[];case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var t=this;this.canvas.width=1e3,this.canvas.height=800,this.ctx=this.canvas.getContext("2d"),this.ctx.lineJoin="round",this.ctx.lineCap="round",this.ctx.lineWidth=5,this.pusher.subscribe("painting").bind("draw",function(e){var n=e.userId,o=e.line;console.log("User "+n+" drew."),n!==t.userId&&o.forEach(function(e){t.paint(e.start,e.stop,t.guestStrokeStyle)})})}},{key:"render",value:function(){var t=this;return s.a.createElement("canvas",{ref:function(e){return t.canvas=e},style:{background:"black"},onMouseDown:this.onMouseDown,onMouseLeave:this.endPaintEvent,onMouseUp:this.endPaintEvent,onMouseMove:this.onMouseMove})}}]),e}(o.Component),m=function(t){function e(){return Object(r.a)(this,e),Object(u.a)(this,Object(f.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return s.a.createElement(o.Fragment,null,s.a.createElement("div",{className:"main"},s.a.createElement(g,null)))}}]),e}(o.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(s.a.createElement(m,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[16,1,2]]]);
//# sourceMappingURL=main.3c668638.chunk.js.map