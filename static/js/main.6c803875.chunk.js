(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,n){e.exports=n(27)},22:function(e,t,n){},23:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(13),i=n.n(o),s=(n(22),n(1)),c=n(2),l=n(4),u=n(3),h=n(5),d=(n(23),n(7)),f=n.n(d),v=n(14),p=n(9),g=n(6),m=n(15),b=n(8),y=n.n(b),E=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).isPainting=!1,n.userStrokeStyle="#EE92C2",n.guestStrokeStyle="#F0C987",n.line=[],n.userId=Object(m.v4)(),n.prevPos={offsetX:0,offsetY:0},n.onMouseDown=n.onMouseDown.bind(Object(g.a)(n)),n.onMouseMove=n.onMouseMove.bind(Object(g.a)(n)),n.endPaintEvent=n.endPaintEvent.bind(Object(g.a)(n)),y.a.logToConsole=!0,n.pusher=new y.a("8bfa62afc4715b6ebbf3",{cluster:"us3",forceTLS:!0}),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"onMouseDown",value:function(e){var t=e.nativeEvent,n=t.offsetX,a=t.offsetY;this.isPainting=!0,this.prevPos={offsetX:n,offsetY:a}}},{key:"onMouseMove",value:function(e){var t=e.nativeEvent;if(this.isPainting){var n={offsetX:t.offsetX,offsetY:t.offsetY},a={start:Object(p.a)({},this.prevPos),stop:Object(p.a)({},n)};this.line=this.line.concat(a),this.paint(this.prevPos,n,this.userStrokeStyle)}}},{key:"endPaintEvent",value:function(){this.isPainting&&(this.isPainting=!1,this.sendPaintData())}},{key:"paint",value:function(e,t,n){var a=t.offsetX,r=t.offsetY,o=e.offsetX,i=e.offsetY;this.ctx.beginPath(),this.ctx.strokeStyle=n,this.ctx.moveTo(o,i),this.ctx.lineTo(a,r),this.ctx.stroke(),this.prevPos={offsetX:a,offsetY:r}}},{key:"sendPaintData",value:function(){var e=Object(v.a)(f.a.mark(function e(){var t,n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={line:this.line,userId:this.userId},e.next=3,fetch("http://sketch-express-env.t3npyev7mz.us-west-1.elasticbeanstalk.com/paint",{method:"post",body:JSON.stringify(t),headers:{"content-type":"application/json"}});case 3:return n=e.sent,e.next=6,n.json();case 6:e.sent,this.line=[];case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this;this.canvas.width=1e3,this.canvas.height=800,this.ctx=this.canvas.getContext("2d"),this.ctx.lineJoin="round",this.ctx.lineCap="round",this.ctx.lineWidth=5,this.pusher.subscribe("painting").bind("draw",function(t){var n=t.userId,a=t.line;n!==e.userId&&a.forEach(function(t){e.paint(t.start,t.stop,e.guestStrokeStyle)})})}},{key:"render",value:function(){var e=this;return r.a.createElement("canvas",{ref:function(t){return e.canvas=t},style:{background:"black"},onMouseDown:this.onMouseDown,onMouseLeave:this.endPaintEvent,onMouseUp:this.endPaintEvent,onMouseMove:this.onMouseMove})}}]),t}(a.Component),O=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).dropRef=r.a.createRef(),e.handleDrag=function(e){e.preventDefault(),e.stopPropagation()},e.handleDragIn=function(t){t.preventDefault(),t.stopPropagation(),e.dragCounter++,t.dataTransfer.items&&t.dataTransfer.items.length>0&&e.setState({dragging:!0})},e.handleDragOut=function(t){t.preventDefault(),t.stopPropagation(),e.dragCounter--,e.dragCounter>0||e.setState({dragging:!1})},e.handleDrop=function(t){t.preventDefault(),t.stopPropagation(),e.setState({drag:!1}),t.dataTransfer.files&&t.dataTransfer.files.length>0&&(e.props.handleDrop(t.dataTransfer.files),t.dataTransfer.clearData(),e.dragCounter=0)},e.state={dragging:!1},e}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.dragCounter=0;var e=this.dropRef.current;e.addEventListener("dragenter",this.handleDragIn),e.addEventListener("dragleave",this.handleDragOut),e.addEventListener("dragover",this.handleDrag),e.addEventListener("drop",this.handleDrop)}},{key:"componentWillUnmount",value:function(){var e=this.dropRef.current;e.removeEventListener("dragenter",this.handleDragIn),e.removeEventListener("dragleave",this.handleDragOut),e.removeEventListener("dragover",this.handleDrag),e.removeEventListener("drop",this.handleDrop)}},{key:"render",value:function(){return r.a.createElement("div",{style:{display:"inline-block",position:"relative"},ref:this.dropRef},this.state.dragging&&r.a.createElement("div",{style:{border:"dashed grey 4px",backgroundColor:"rgba(255,255,255,.8)",position:"absolute",top:0,bottom:0,left:0,right:0,zIndex:9999}},r.a.createElement("div",{style:{position:"absolute",top:"50%",right:0,left:0,textAlign:"center",color:"grey",fontSize:36}},r.a.createElement("div",null,"drop here :)"))),this.props.children)}}]),t}(a.Component),k=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={files:[]},n.handleDrop=function(e){for(var t=n.state.files,a=0;a<e.length;a++){if(!e[a].name)return;t.push(e[a].name)}n.setState({files:t})},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(O,{handleDrop:this.handleDrop},r.a.createElement("div",{style:{height:300,width:250}},this.state.files.map(function(e,t){return r.a.createElement("div",{key:t},e)})))}}]),t}(a.Component),D=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:"main"},r.a.createElement("div",{className:"color-guide"},r.a.createElement("h5",null,"Color Guide"),r.a.createElement("div",{className:"user user"},"User"),r.a.createElement("div",{className:"user guest"},"Guest")),r.a.createElement(E,null),r.a.createElement(k,null)))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[16,1,2]]]);
//# sourceMappingURL=main.6c803875.chunk.js.map